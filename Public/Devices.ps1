function Get-NBDevice {
    [CmdletBinding()]
    param (
        [string[]]$Airflow,
        [string[]]$AssetTag,
        [bool]$AssetTag__empty,
        [string[]]$AssetTag__ic,
        [string[]]$AssetTag__ie,
        [string[]]$AssetTag__iew,
        [string[]]$AssetTag__isw,
        [string[]]$AssetTag__n,
        [string[]]$AssetTag__nic,
        [string[]]$AssetTag__nie,
        [string[]]$AssetTag__niew,
        [string[]]$AssetTag__nisw,
        [string[]]$ClusterGroup,
        [string[]]$ClusterGroup__n,
        [int[]]$ClusterGroupId,
        [int[]]$ClusterGroupId__n,
        [int[]]$ClusterId,
        [int[]]$ClusterId__n,
        [int[]]$ConfigTemplateId,
        [int[]]$ConfigTemplateId__n,
        [int[]]$ConsolePortCount,
        [bool]$ConsolePortCount__empty,
        [int[]]$ConsolePortCount__gt,
        [int[]]$ConsolePortCount__gte,
        [int[]]$ConsolePortCount__lt,
        [int[]]$ConsolePortCount__lte,
        [int[]]$ConsolePortCount__n,
        [bool]$ConsolePorts,
        [int[]]$ConsoleServerPortCount,
        [bool]$ConsoleServerPortCount__empty,
        [int[]]$ConsoleServerPortCount__gt,
        [int[]]$ConsoleServerPortCount__gte,
        [int[]]$ConsoleServerPortCount__lt,
        [int[]]$ConsoleServerPortCount__lte,
        [int[]]$ConsoleServerPortCount__n,
        [bool]$ConsoleServerPorts,
        [int[]]$Contact,
        [int[]]$Contact__n,
        [string[]]$ContactGroup,
        [string[]]$ContactGroup__n,
        [int[]]$ContactRole,
        [int[]]$ContactRole__n,
        [string[]]$Created,
        [string[]]$Created__empty,
        [string[]]$Created__gt,
        [string[]]$Created__gte,
        [string[]]$Created__lt,
        [string[]]$Created__lte,
        [string[]]$Created__n,
        [string]$CreatedByRequest,
        [string[]]$Description,
        [bool]$Description__empty,
        [string[]]$Description__ic,
        [string[]]$Description__ie,
        [string[]]$Description__iew,
        [string[]]$Description__isw,
        [string[]]$Description__n,
        [string[]]$Description__nic,
        [string[]]$Description__nie,
        [string[]]$Description__niew,
        [string[]]$Description__nisw,
        [int[]]$DeviceBayCount,
        [bool]$DeviceBayCount__empty,
        [int[]]$DeviceBayCount__gt,
        [int[]]$DeviceBayCount__gte,
        [int[]]$DeviceBayCount__lt,
        [int[]]$DeviceBayCount__lte,
        [int[]]$DeviceBayCount__n,
        [bool]$DeviceBays,
        [string[]]$DeviceType,
        [string[]]$DeviceType__n,
        [int[]]$DeviceTypeId,
        [int[]]$DeviceTypeId__n,
        [string]$Face,
        [int[]]$FrontPortCount,
        [bool]$FrontPortCount__empty,
        [int[]]$FrontPortCount__gt,
        [int[]]$FrontPortCount__gte,
        [int[]]$FrontPortCount__lt,
        [int[]]$FrontPortCount__lte,
        [int[]]$FrontPortCount__n,
        [bool]$HasOobIp,
        [bool]$HasPrimaryIp,
        [bool]$HasVirtualDeviceContext,
        [int[]]$Id,
        [bool]$Id__empty,
        [int[]]$Id__gt,
        [int[]]$Id__gte,
        [int[]]$Id__lt,
        [int[]]$Id__lte,
        [int[]]$Id__n,
        [int[]]$InterfaceCount,
        [bool]$InterfaceCount__empty,
        [int[]]$InterfaceCount__gt,
        [int[]]$InterfaceCount__gte,
        [int[]]$InterfaceCount__lt,
        [int[]]$InterfaceCount__lte,
        [int[]]$InterfaceCount__n,
        [bool]$Interfaces,
        [int[]]$InventoryItemCount,
        [bool]$InventoryItemCount__empty,
        [int[]]$InventoryItemCount__gt,
        [int[]]$InventoryItemCount__gte,
        [int[]]$InventoryItemCount__lt,
        [int[]]$InventoryItemCount__lte,
        [int[]]$InventoryItemCount__n,
        [bool]$IsFullDepth,
        [string[]]$LastUpdated,
        [string[]]$LastUpdated__empty,
        [string[]]$LastUpdated__gt,
        [string[]]$LastUpdated__gte,
        [string[]]$LastUpdated__lt,
        [string[]]$LastUpdated__lte,
        [string[]]$LastUpdated__n,
        [float[]]$Latitude,
        [bool]$Latitude__empty,
        [float[]]$Latitude__gt,
        [float[]]$Latitude__gte,
        [float[]]$Latitude__lt,
        [float[]]$Latitude__lte,
        [float[]]$Latitude__n,
        [int]$Limit,
        [bool]$LocalContextData,
        [string[]]$Location,
        [string[]]$Location__n,
        [string[]]$LocationId,
        [string[]]$LocationId__n,
        [float[]]$Longitude,
        [bool]$Longitude__empty,
        [float[]]$Longitude__gt,
        [float[]]$Longitude__gte,
        [float[]]$Longitude__lt,
        [float[]]$Longitude__lte,
        [float[]]$Longitude__n,
        [string[]]$MacAddress,
        [string[]]$MacAddress__ic,
        [string[]]$MacAddress__ie,
        [string[]]$MacAddress__iew,
        [string[]]$MacAddress__isw,
        [string[]]$MacAddress__n,
        [string[]]$MacAddress__nic,
        [string[]]$MacAddress__nie,
        [string[]]$MacAddress__niew,
        [string[]]$MacAddress__nisw,
        [string[]]$Manufacturer,
        [string[]]$Manufacturer__n,
        [int[]]$ManufacturerId,
        [int[]]$ManufacturerId__n,
        [string[]]$Model,
        [string[]]$Model__n,
        [string]$ModifiedByRequest,
        [int[]]$ModuleBayCount,
        [bool]$ModuleBayCount__empty,
        [int[]]$ModuleBayCount__gt,
        [int[]]$ModuleBayCount__gte,
        [int[]]$ModuleBayCount__lt,
        [int[]]$ModuleBayCount__lte,
        [int[]]$ModuleBayCount__n,
        [bool]$ModuleBays,
        [string[]]$Name,
        [bool]$Name__empty,
        [string[]]$Name__ic,
        [string[]]$Name__ie,
        [string[]]$Name__iew,
        [string[]]$Name__isw,
        [string[]]$Name__n,
        [string[]]$Name__nic,
        [string[]]$Name__nie,
        [string[]]$Name__niew,
        [string[]]$Name__nisw,
        [int]$Offset,
        [int[]]$OobIpId,
        [int[]]$OobIpId__n,
        [string]$Ordering,
        [int[]]$ParentBayId,
        [int[]]$ParentBayId__n,
        [int[]]$ParentDeviceId,
        [int[]]$ParentDeviceId__n,
        [bool]$PassThroughPorts,
        [string[]]$Platform,
        [string[]]$Platform__n,
        [int[]]$PlatformId,
        [int[]]$PlatformId__n,
        [float[]]$Position,
        [bool]$Position__empty,
        [float[]]$Position__gt,
        [float[]]$Position__gte,
        [float[]]$Position__lt,
        [float[]]$Position__lte,
        [float[]]$Position__n,
        [int[]]$PowerOutletCount,
        [bool]$PowerOutletCount__empty,
        [int[]]$PowerOutletCount__gt,
        [int[]]$PowerOutletCount__gte,
        [int[]]$PowerOutletCount__lt,
        [int[]]$PowerOutletCount__lte,
        [int[]]$PowerOutletCount__n,
        [bool]$PowerOutlets,
        [int[]]$PowerPortCount,
        [bool]$PowerPortCount__empty,
        [int[]]$PowerPortCount__gt,
        [int[]]$PowerPortCount__gte,
        [int[]]$PowerPortCount__lt,
        [int[]]$PowerPortCount__lte,
        [int[]]$PowerPortCount__n,
        [bool]$PowerPorts,
        [string[]]$PrimaryIp4,
        [string[]]$PrimaryIp4__n,
        [int[]]$PrimaryIp4Id,
        [int[]]$PrimaryIp4Id__n,
        [string[]]$PrimaryIp6,
        [string[]]$PrimaryIp6__n,
        [int[]]$PrimaryIp6Id,
        [int[]]$PrimaryIp6Id__n,
        [string]$Q,
        [int[]]$RackId,
        [int[]]$RackId__n,
        [int[]]$RearPortCount,
        [bool]$RearPortCount__empty,
        [int[]]$RearPortCount__gt,
        [int[]]$RearPortCount__gte,
        [int[]]$RearPortCount__lt,
        [int[]]$RearPortCount__lte,
        [int[]]$RearPortCount__n,
        [string[]]$Region,
        [string[]]$Region__n,
        [string[]]$RegionId,
        [string[]]$RegionId__n,
        [string[]]$Role,
        [string[]]$Role__n,
        [string[]]$RoleId,
        [string[]]$RoleId__n,
        [string[]]$Serial,
        [bool]$Serial__empty,
        [string[]]$Serial__ic,
        [string[]]$Serial__ie,
        [string[]]$Serial__iew,
        [string[]]$Serial__isw,
        [string[]]$Serial__n,
        [string[]]$Serial__nic,
        [string[]]$Serial__nie,
        [string[]]$Serial__niew,
        [string[]]$Serial__nisw,
        [string[]]$Site,
        [string[]]$Site__n,
        [string[]]$SiteGroup,
        [string[]]$SiteGroup__n,
        [string[]]$SiteGroupId,
        [string[]]$SiteGroupId__n,
        [int[]]$SiteId,
        [int[]]$SiteId__n,
        [string[]]$Status,
        [bool]$Status__empty,
        [string[]]$Status__ic,
        [string[]]$Status__ie,
        [string[]]$Status__iew,
        [string[]]$Status__isw,
        [string[]]$Status__n,
        [string[]]$Status__nic,
        [string[]]$Status__nie,
        [string[]]$Status__niew,
        [string[]]$Status__nisw,
        [string[]]$Tag,
        [string[]]$Tag__n,
        [int[]]$TagId,
        [int[]]$TagId__n,
        [string[]]$Tenant,
        [string[]]$Tenant__n,
        [string[]]$TenantGroup,
        [string[]]$TenantGroup__n,
        [string[]]$TenantGroupId,
        [string[]]$TenantGroupId__n,
        [int[]]$TenantId,
        [int[]]$TenantId__n,
        [string]$UpdatedByRequest,
        [int[]]$VcPosition,
        [bool]$VcPosition__empty,
        [int[]]$VcPosition__gt,
        [int[]]$VcPosition__gte,
        [int[]]$VcPosition__lt,
        [int[]]$VcPosition__lte,
        [int[]]$VcPosition__n,
        [int[]]$VcPriority,
        [bool]$VcPriority__empty,
        [int[]]$VcPriority__gt,
        [int[]]$VcPriority__gte,
        [int[]]$VcPriority__lt,
        [int[]]$VcPriority__lte,
        [int[]]$VcPriority__n,
        [int[]]$VirtualChassisId,
        [int[]]$VirtualChassisId__n,
        [bool]$VirtualChassisMember
    )

    $filters = @{}
    $PSBoundParameters.GetEnumerator() | ForEach-Object {
        if ($_.Key -ne 'Verbose' -and $_.Key -ne 'Debug' -and $_.Key -ne 'ErrorAction' -and $_.Key -ne 'WarningAction' -and $_.Key -ne 'InformationAction') {
            $filters[$_.Key -replace '_', '__'] = $_.Value
        }
    }

    Invoke-NBGet -Domain "dcim/devices" -Filters $filters
}

function New-NBDevice {
    param (
        [Parameter(Mandatory)][int]$DeviceTypeID,
        [Parameter(Mandatory)][int]$DeviceRoleID,
        [Parameter(Mandatory)][int]$SiteID,
        [Parameter(Mandatory)][string]$Name,
        [string]$Serial,
        [string]$Description
    )

    $Payload = @{
        device_type = $DeviceTypeID
        role        = $DeviceRoleID
        site        = $SiteID
        name        = $Name
        serial      = $Serial
        description = $Description
    }

    Invoke-NBPost -Domain "dcim/devices" -Payload $Payload
}

Export-ModuleMember -Function Get-NBDevice, New-NBDevice
